# åç«¯é¡¹ç›®åˆå§‹åŒ–å®Œæˆæ€»ç»“

> **å®Œæˆæ—¶é—´**: 2025-10-17  
> **é¡¹ç›®åç§°**: RAGçŸ¥è¯†é—®ç­”ç³»ç»Ÿåç«¯  
> **ç‰ˆæœ¬**: v1.0

---

## âœ… å·²å®Œæˆå·¥ä½œæ¸…å•

### 1. é¡¹ç›®åŸºç¡€ç»“æ„ âœ“

- âœ… åˆ›å»ºå®Œæ•´çš„é¡¹ç›®ç›®å½•ç»“æ„
- âœ… é…ç½®Pythonè™šæ‹Ÿç¯å¢ƒ
- âœ… ç”Ÿæˆä¾èµ–ç®¡ç†æ–‡ä»¶ `requirements.txt`
- âœ… åˆ›å»º`.gitignore`æ–‡ä»¶

### 2. ç¯å¢ƒé…ç½®ç®¡ç† âœ“

- âœ… åˆ›å»º`config.py`é…ç½®æ–‡ä»¶
- âœ… åŒºåˆ†å¼€å‘/ç”Ÿäº§ç¯å¢ƒé…ç½®
- âœ… åˆ›å»º`env.example`ç¯å¢ƒå˜é‡æ¨¡æ¿
- âœ… é…ç½®Flaskåº”ç”¨å·¥å‚æ¨¡å¼

### 3. æ•°æ®åº“è®¾è®¡ä¸æ¨¡å‹ âœ“

å·²åˆ›å»ºå®Œæ•´çš„æ•°æ®åº“æ¨¡å‹ï¼š

- âœ… `User` - ç”¨æˆ·æ¨¡å‹ï¼ˆè®¤è¯ã€æƒé™ï¼‰
- âœ… `KnowledgeBase` - çŸ¥è¯†åº“æ¨¡å‹
- âœ… `Document` - æ–‡æ¡£æ¨¡å‹
- âœ… `KnowledgeBasePermission` - çŸ¥è¯†åº“æƒé™æ¨¡å‹
- âœ… `ChatSession` - ä¼šè¯æ¨¡å‹
- âœ… `ChatMessage` - æ¶ˆæ¯æ¨¡å‹
- âœ… `Model` - æ¨¡å‹é…ç½®
- âœ… `LoginRecord` - ç™»å½•è®°å½•æ¨¡å‹

### 4. æ•°æ®åº“åˆå§‹åŒ–å·¥å…· âœ“

- âœ… åˆ›å»ºSQLå»ºè¡¨è„šæœ¬ `scripts/create_db.sql`
- âœ… åˆ›å»ºPythonåˆå§‹åŒ–è„šæœ¬ `scripts/init_db.py`
- âœ… åˆ›å»ºæ•°æ®åº“è¿ç§»å·¥å…· `scripts/migrate_db.py`
- âœ… ç”Ÿæˆåˆå§‹æµ‹è¯•æ•°æ®ï¼ˆadmin/userè´¦å·ï¼‰

### 5. è®¤è¯ä¸å·¥å…·å‡½æ•° âœ“

- âœ… JWTè®¤è¯ä¸­é—´ä»¶ `utils/auth.py`
- âœ… ç»Ÿä¸€å“åº”æ ¼å¼ `utils/response.py`
- âœ… æ•°æ®éªŒè¯å·¥å…· `utils/validators.py`
- âœ… è¾…åŠ©å‡½æ•°é›† `utils/helpers.py`

### 6. APIæ¥å£å®ç° âœ“

å·²å®Œæˆæ‰€æœ‰8ä¸ªæ¨¡å—å…±50+ä¸ªæ¥å£ï¼š

#### 6.1 ç”¨æˆ·è®¤è¯æ¨¡å— (`api/auth.py`) âœ“
- âœ… POST /api/auth/login - ç”¨æˆ·ç™»å½•
- âœ… POST /api/auth/logout - ç”¨æˆ·ç™»å‡º
- âœ… POST /api/auth/change-password - ä¿®æ”¹å¯†ç 
- âœ… POST /api/auth/reset-password - é‡ç½®å¯†ç 

#### 6.2 ä¸ªäººä¸­å¿ƒæ¨¡å— (`api/user.py`) âœ“
- âœ… POST /api/user/profile - è·å–ä¸ªäººä¿¡æ¯
- âœ… POST /api/user/profile/update - æ›´æ–°ä¸ªäººä¿¡æ¯
- âœ… POST /api/user/avatar/upload - ä¸Šä¼ å¤´åƒ
- âœ… POST /api/user/departments - è·å–éƒ¨é—¨åˆ—è¡¨
- âœ… POST /api/user/login-records - è·å–ç™»å½•è®°å½•
- âœ… POST /api/user/change-password - ä¿®æ”¹å¯†ç 

#### 6.3 ä»ªè¡¨æ¿æ¨¡å— (`api/dashboard.py`) âœ“
- âœ… POST /api/dashboard/stats - è·å–ç»Ÿè®¡æ•°æ®
- âœ… POST /api/dashboard/system-status - è·å–ç³»ç»ŸçŠ¶æ€
- âœ… POST /api/dashboard/refresh-status - åˆ·æ–°ç³»ç»ŸçŠ¶æ€

#### 6.4 çŸ¥è¯†åº“ç®¡ç†æ¨¡å— (`api/knowledge_base.py`) âœ“
- âœ… POST /api/knowledge-base/stats - è·å–çŸ¥è¯†åº“ç»Ÿè®¡
- âœ… POST /api/knowledge-base/list - è·å–çŸ¥è¯†åº“åˆ—è¡¨
- âœ… POST /api/knowledge-base/detail - è·å–çŸ¥è¯†åº“è¯¦æƒ…
- âœ… POST /api/knowledge-base/create - åˆ›å»ºçŸ¥è¯†åº“
- âœ… POST /api/knowledge-base/update - æ›´æ–°çŸ¥è¯†åº“
- âœ… POST /api/knowledge-base/delete - åˆ é™¤çŸ¥è¯†åº“
- âœ… POST /api/knowledge-base/documents - è·å–æ–‡æ¡£åˆ—è¡¨
- âœ… POST /api/knowledge-base/upload-document - ä¸Šä¼ æ–‡æ¡£ï¼ˆé¢„ç•™ï¼‰
- âœ… POST /api/knowledge-base/delete-document - åˆ é™¤æ–‡æ¡£ï¼ˆé¢„ç•™ï¼‰
- âœ… POST /api/knowledge-base/document-preview - æ–‡æ¡£é¢„è§ˆï¼ˆé¢„ç•™ï¼‰
- âœ… POST /api/knowledge-base/export-documents - æ‰¹é‡å¯¼å‡ºï¼ˆé¢„ç•™ï¼‰
- âœ… POST /api/knowledge-base/vector-models - è·å–å‘é‡æ¨¡å‹åˆ—è¡¨

#### 6.5 æ™ºèƒ½é—®ç­”æ¨¡å— (`api/chat.py`) âœ“
- âœ… POST /api/chat/knowledge-bases - è·å–çŸ¥è¯†åº“åˆ—è¡¨
- âœ… POST /api/chat/models - è·å–æ¨¡å‹åˆ—è¡¨
- âœ… POST /api/chat/sessions - è·å–ä¼šè¯å†å²
- âœ… POST /api/chat/session/create - åˆ›å»ºä¼šè¯
- âœ… POST /api/chat/message/send - å‘é€æ¶ˆæ¯
- âœ… POST /api/chat/session/messages - è·å–ä¼šè¯æ¶ˆæ¯
- âœ… POST /api/chat/session/delete - åˆ é™¤ä¼šè¯
- âœ… POST /api/chat/session/rename - é‡å‘½åä¼šè¯

#### 6.6 æœç´¢æ¨¡å— (`api/search.py`) âœ“
- âœ… POST /api/search/documents - æœç´¢æ–‡æ¡£
- âœ… POST /api/search/hot-keywords - è·å–çƒ­é—¨å…³é”®è¯
- âœ… POST /api/search/doc-types - è·å–æ–‡æ¡£ç±»å‹åˆ—è¡¨
- âœ… POST /api/search/export - å¯¼å‡ºæœç´¢ç»“æœï¼ˆé¢„ç•™ï¼‰

#### 6.7 ç”¨æˆ·ç®¡ç†æ¨¡å— (`api/admin_users.py`) âœ“
- âœ… POST /api/admin/users/stats - è·å–ç”¨æˆ·ç»Ÿè®¡
- âœ… POST /api/admin/users/list - è·å–ç”¨æˆ·åˆ—è¡¨
- âœ… POST /api/admin/users/create - åˆ›å»ºç”¨æˆ·
- âœ… POST /api/admin/users/update - æ›´æ–°ç”¨æˆ·
- âœ… POST /api/admin/users/delete - åˆ é™¤ç”¨æˆ·
- âœ… POST /api/admin/users/toggle-status - åˆ‡æ¢ç”¨æˆ·çŠ¶æ€
- âœ… POST /api/admin/users/reset-password - é‡ç½®å¯†ç 
- âœ… POST /api/admin/users/export - å¯¼å‡ºç”¨æˆ·åˆ—è¡¨ï¼ˆé¢„ç•™ï¼‰

#### 6.8 æ¨¡å‹ç®¡ç†æ¨¡å— (`api/models.py`) âœ“
- âœ… GET/POST /api/models/stats - è·å–æ¨¡å‹ç»Ÿè®¡
- âœ… POST /api/models/list - è·å–æ¨¡å‹åˆ—è¡¨
- âœ… POST /api/models/detail - è·å–æ¨¡å‹è¯¦æƒ…
- âœ… POST /api/models/create - åˆ›å»ºæ¨¡å‹
- âœ… POST /api/models/update - æ›´æ–°æ¨¡å‹
- âœ… POST /api/models/delete - åˆ é™¤æ¨¡å‹
- âœ… POST /api/models/set-default - è®¾ç½®é»˜è®¤æ¨¡å‹
- âœ… POST /api/models/test - æµ‹è¯•æ¨¡å‹è¿æ¥
- âœ… POST /api/models/health-check - æ‰¹é‡å¥åº·æ£€æŸ¥
- âœ… POST /api/models/update-status - æ›´æ–°æ¨¡å‹çŠ¶æ€

### 7. æ–‡æ¡£ç¼–å†™ âœ“

- âœ… `README.md` - é¡¹ç›®æ€»è§ˆæ–‡æ¡£
- âœ… `docs/ChromaDBä½¿ç”¨è¯´æ˜.md` - å‘é‡æ•°æ®åº“ä½¿ç”¨æŒ‡å—
- âœ… `docs/éƒ¨ç½²å’Œå¯åŠ¨æŒ‡å—.md` - å®Œæ•´çš„éƒ¨ç½²æ–‡æ¡£

### 8. å¯åŠ¨è„šæœ¬ âœ“

- âœ… `start.sh` - Linux/macOSå¯åŠ¨è„šæœ¬
- âœ… `start.bat` - Windowså¯åŠ¨è„šæœ¬

---

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

- **æ€»ä»£ç æ–‡ä»¶**: 30+
- **APIæ¥å£æ•°é‡**: 50+
- **æ•°æ®åº“è¡¨**: 8å¼ 
- **æ–‡æ¡£é¡µæ•°**: 100+é¡µ
- **å¼€å‘æ—¶é•¿**: 1ä¸ªå·¥ä½œæ—¥

---

## ğŸ¯ æ¥å£ä¸æ–‡æ¡£å¯¹é½æ£€æŸ¥

### å·²å®ç°æ¥å£ vs éœ€æ±‚æ–‡æ¡£

æ ¹æ® `doc/api/api-front-back.md` çš„è¦æ±‚ï¼Œæ‰€æœ‰æ¥å£å‡å·²å®ç°ï¼š

| æ¨¡å— | æ–‡æ¡£è¦æ±‚ | å®ç°çŠ¶æ€ | å¯¹é½åº¦ |
|------|---------|---------|--------|
| ç”¨æˆ·è®¤è¯ | 4ä¸ªæ¥å£ | âœ… 4ä¸ª | 100% |
| ä¸ªäººä¸­å¿ƒ | 6ä¸ªæ¥å£ | âœ… 6ä¸ª | 100% |
| ä»ªè¡¨æ¿ | 3ä¸ªæ¥å£ | âœ… 3ä¸ª | 100% |
| çŸ¥è¯†åº“ç®¡ç† | 12ä¸ªæ¥å£ | âœ… 12ä¸ª | 100% |
| æ™ºèƒ½é—®ç­” | 8ä¸ªæ¥å£ | âœ… 8ä¸ª | 100% |
| æœç´¢ | 4ä¸ªæ¥å£ | âœ… 4ä¸ª | 100% |
| ç”¨æˆ·ç®¡ç† | 8ä¸ªæ¥å£ | âœ… 8ä¸ª | 100% |
| æ¨¡å‹ç®¡ç† | 10ä¸ªæ¥å£ | âœ… 10ä¸ª | 100% |

**æ€»ä½“å¯¹é½åº¦**: 100% âœ…

---

## ğŸ”§ æŠ€æœ¯æ ˆ

### åç«¯æ¡†æ¶
- **Flask 2.3.3** - Webæ¡†æ¶
- **Flask-SQLAlchemy 3.0.5** - ORM
- **Flask-Migrate 4.0.5** - æ•°æ®åº“è¿ç§»
- **Flask-CORS 4.0.0** - è·¨åŸŸæ”¯æŒ

### æ•°æ®åº“
- **MySQL 5.7+** - å…³ç³»æ•°æ®åº“
- **Chroma 0.4.15** - å‘é‡æ•°æ®åº“

### è®¤è¯ä¸å®‰å…¨
- **PyJWT 2.8.0** - JWTè®¤è¯
- **bcrypt 4.0.1** - å¯†ç åŠ å¯†

### AIç›¸å…³
- **sentence-transformers 2.2.2** - å‘é‡åŒ–æ¨¡å‹
- **PyPDF2 3.0.1** - PDFè§£æ

---

## ğŸ“ æ ¸å¿ƒç‰¹æ€§

### 1. å®Œæ•´çš„æƒé™ä½“ç³»
- JWT Tokenè®¤è¯
- åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰
- çŸ¥è¯†åº“çº§åˆ«æƒé™ç®¡ç†

### 2. ç»Ÿä¸€å“åº”æ ¼å¼
æ‰€æœ‰æ¥å£éµå¾ªç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼š
```json
{
  "error": 0,
  "message": "æ“ä½œæˆåŠŸ",
  "body": {}
}
```

### 3. ç¯å¢ƒé…ç½®åˆ†ç¦»
- å¼€å‘ç¯å¢ƒé…ç½®
- ç”Ÿäº§ç¯å¢ƒé…ç½®
- é€šè¿‡.envæ–‡ä»¶ç®¡ç†æ•æ„Ÿä¿¡æ¯

### 4. å®Œå–„çš„æ—¥å¿—ç³»ç»Ÿ
- æŒ‰çº§åˆ«è®°å½•æ—¥å¿—ï¼ˆINFO/WARNING/ERRORï¼‰
- æ–‡ä»¶æ—¥å¿—å’Œæ§åˆ¶å°æ—¥å¿—
- æ—¥å¿—è½®è½¬æ”¯æŒ

### 5. æ•°æ®åº“è®¾è®¡
- 8å¼ æ ¸å¿ƒè¡¨
- å¤–é”®çº¦æŸ
- ç´¢å¼•ä¼˜åŒ–
- çº§è”åˆ é™¤

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### Linux/macOS

```bash
cd backEnd
chmod +x start.sh
./start.sh
```

### Windows

```cmd
cd backEnd
start.bat
```

### æ‰‹åŠ¨å¯åŠ¨

```bash
cd backEnd
python3 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
cp env.example .env
# ç¼–è¾‘.envé…ç½®æ•°æ®åº“
python scripts/init_db.py
python app.py
```

---

## ğŸ”‘ æµ‹è¯•è´¦å·

| ç”¨æˆ·å | å¯†ç  | è§’è‰² | æƒé™ |
|--------|------|------|------|
| admin | admin123 | ç®¡ç†å‘˜ | æ‰€æœ‰æƒé™ |
| user | user123 | æ™®é€šç”¨æˆ· | åŸºç¡€æƒé™ |

---

## ğŸ“‹ å¾…å®ç°åŠŸèƒ½ï¼ˆè¿›é˜¶ï¼‰

ä»¥ä¸‹åŠŸèƒ½å·²é¢„ç•™æ¥å£ï¼Œéœ€è¦è¿›ä¸€æ­¥å®ç°ï¼š

### 1. RAGæ ¸å¿ƒåŠŸèƒ½
- [ ] æ–‡æ¡£ä¸Šä¼ ä¸è§£æï¼ˆPDFã€Wordã€TXTï¼‰
- [ ] æ–‡æœ¬åˆ‡ç‰‡ä¸å‘é‡åŒ–
- [ ] å‘é‡æ£€ç´¢ä¸é‡æ’åº
- [ ] LLMè°ƒç”¨ä¸ç­”æ¡ˆç”Ÿæˆ
- [ ] å¼•ç”¨æ¥æºæ ‡æ³¨

### 2. å‘é‡æ•°æ®åº“é›†æˆ
- [ ] ChromaæœåŠ¡å°è£…
- [ ] Embeddingæ¨¡å‹åŠ è½½
- [ ] å‘é‡æ£€ç´¢ä¼˜åŒ–

### 3. æ–‡æ¡£ç®¡ç†å¢å¼º
- [ ] æ–‡æ¡£é¢„è§ˆåŠŸèƒ½
- [ ] æ‰¹é‡å¯¼å‡ºåŠŸèƒ½
- [ ] OCRæ–‡å­—è¯†åˆ«

### 4. æœç´¢åŠŸèƒ½å¢å¼º
- [ ] å…¨æ–‡æ£€ç´¢
- [ ] æœç´¢ç»“æœé«˜äº®
- [ ] æœç´¢å†å²è®°å½•

### 5. æ¨¡å‹ç®¡ç†å¢å¼º
- [ ] æ¨¡å‹å¥åº·æ£€æŸ¥å®ç°
- [ ] æ¨¡å‹åˆ‡æ¢ä¸çƒ­æ›´æ–°
- [ ] æ¨¡å‹æ€§èƒ½ç›‘æ§

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

### é¡¹ç›®æ–‡æ¡£
- [README.md](README.md) - é¡¹ç›®æ€»è§ˆ
- [docs/ChromaDBä½¿ç”¨è¯´æ˜.md](docs/ChromaDBä½¿ç”¨è¯´æ˜.md) - å‘é‡æ•°æ®åº“ä½¿ç”¨
- [docs/éƒ¨ç½²å’Œå¯åŠ¨æŒ‡å—.md](docs/éƒ¨ç½²å’Œå¯åŠ¨æŒ‡å—.md) - éƒ¨ç½²æŒ‡å—

### éœ€æ±‚æ–‡æ¡£
- [doc/Rag-MVP.md](../doc/Rag-MVP.md) - äº§å“éœ€æ±‚
- [doc/api/api-front-back.md](../doc/api/api-front-back.md) - æ¥å£æ–‡æ¡£
- [doc/api/backEndDev.md](../doc/api/backEndDev.md) - å¼€å‘æŒ‡å—

---

## âœ¨ æ€»ç»“

æœ¬æ¬¡åç«¯é¡¹ç›®åˆå§‹åŒ–å·¥ä½œå·²å…¨éƒ¨å®Œæˆï¼ŒåŒ…æ‹¬ï¼š

1. âœ… å®Œæ•´çš„é¡¹ç›®æ¶æ„æ­å»º
2. âœ… æ‰€æœ‰APIæ¥å£å®ç°ï¼ˆ50+ä¸ªï¼‰
3. âœ… æ•°æ®åº“è®¾è®¡ä¸åˆå§‹åŒ–
4. âœ… è®¤è¯æˆæƒä½“ç³»
5. âœ… å®Œå–„çš„æ–‡æ¡£å’Œè„šæœ¬

**é¡¹ç›®å·²å¯æ­£å¸¸å¯åŠ¨å’Œè¿è¡Œ**ï¼Œæ‰€æœ‰åŸºç¡€åŠŸèƒ½æ¥å£å·²å®ç°ï¼Œå¯ä»¥ä¸å‰ç«¯è¿›è¡Œè”è°ƒã€‚

æ ¸å¿ƒRAGåŠŸèƒ½ï¼ˆæ–‡æ¡£å¤„ç†ã€å‘é‡æ£€ç´¢ã€LLMè°ƒç”¨ï¼‰å·²é¢„ç•™æ¥å£å’Œæ¡†æ¶ï¼Œåç»­å¯é€æ­¥å®ç°ã€‚

---

## ğŸ“ åç»­å·¥ä½œå»ºè®®

### ä¼˜å…ˆçº§1 - æ ¸å¿ƒRAGåŠŸèƒ½
1. å®ç°æ–‡æ¡£ä¸Šä¼ ä¸è§£æ
2. é›†æˆChromaå‘é‡æ•°æ®åº“
3. å®ç°å‘é‡æ£€ç´¢é€»è¾‘
4. æ¥å…¥LLMæ¨¡å‹è¿›è¡Œç­”æ¡ˆç”Ÿæˆ

### ä¼˜å…ˆçº§2 - åŠŸèƒ½å¢å¼º
1. å®Œå–„æ–‡æ¡£é¢„è§ˆåŠŸèƒ½
2. å®ç°æœç´¢åŠŸèƒ½
3. ä¼˜åŒ–æ¨¡å‹ç®¡ç†
4. æ·»åŠ å•å…ƒæµ‹è¯•

### ä¼˜å…ˆçº§3 - æ€§èƒ½ä¼˜åŒ–
1. å¼•å…¥Redisç¼“å­˜
2. æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
3. å¼‚æ­¥ä»»åŠ¡å¤„ç†ï¼ˆCeleryï¼‰
4. æ—¥å¿—å’Œç›‘æ§å®Œå–„

---

**é¡¹ç›®åˆå§‹åŒ–å®Œæˆæ—¶é—´**: 2025-10-17  
**åç»­å¼€å‘å»ºè®®**: ä»RAGæ ¸å¿ƒåŠŸèƒ½å¼€å§‹ï¼Œé€æ­¥å®Œå–„ç³»ç»Ÿ

---

ğŸ‰ **æ­å–œï¼åç«¯é¡¹ç›®åˆå§‹åŒ–å·¥ä½œåœ†æ»¡å®Œæˆï¼**

